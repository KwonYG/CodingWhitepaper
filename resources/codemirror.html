<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.2/codemirror.css">
  <style>
    body {
      background-color: #eee;
    }
  </style>
</head>

<body>
  <textarea name="name" rows="8" cols="80" id="CodeMirrorEditor">
    $(document).ready(function() {
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        mode: "text/html",
        lineNumbers: true,
    });

    $("#insert").click(function(){
    	var content = $("#content").val();
    	editor.setValue(content)
    });
});
</textarea>
<br>
  <textarea name="editor" id="answerEditor" rows="3" cols="100">
  </textarea>
<br>
  <button id="commentBtn">Add comment</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.40.2/codemirror.js"></script>

  <script>
  var editor = CodeMirror.fromTextArea(document.getElementById("CodeMirrorEditor"), {
    mode: "text/x-java",
    lineNumbers: true
  });

    /*var editor = CodeMirror(document.getElementsByTagName('textarea')[0], {
      parserfile: ["Answer.java"],
      mode: "text/x-java",
      lineNumbers: true
    });*/

    var btn = document.getElementById('commentBtn');
    btn.addEventListener('click', function() {
      var textArea = document.getElementById('answerEditor');
      var para = document.createElement("PRE"); // Create a <p> element
      para.setAttribute("style", "margin: 4px 8px; background-color: rgb(0, 255, 179);");

      var t = document.createTextNode(textArea.value); // Create a text node
      para.appendChild(t); // Append the text to <p>

      var removeBtn = document.createElement("BUTTON");
      removeBtn.appendChild(document.createTextNode("Remove"));
      para.appendChild(removeBtn);
      editor.addLineWidget(editor.getCursor().line, para);
    });
    //remove 버튼 이벤트 위임으로 해결하기
  </script>
</body>

</html>
